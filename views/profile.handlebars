<div class="background" id="info">
    <div>
        <h3 id="user-username" class="text">Username: </h3>
        <h3 id="user-email" class="text">Email: </h3>
    </div>

    <div>
        <h9 style="color: red; text-align: center;">{{ errMessage }}</h9>
        <form action="/profile" method="POST" style="text-align: center; margin-bottom: 15px">
            <input type="hidden" name="_csrf" value="{{csrfToken}}">
            <input type="username" class="input" name="new_username" placeholder="New username">

            <input type="password" class="input" name="password" placeholder="Password">
            <button type="submit" class="btn button">Change Username</button>
        </form>

        <form action="/profile" method="POST" style="text-align: center; margin-bottom: 15px">
            <input type="hidden" name="_csrf" value="{{csrfToken}}">
            <input type="email" class="input" name="new_email" placeholder="New email">

            <input type="password" class="input" name="password" placeholder="Password">
            <button type="submit" class="btn button">Change Email</button>
        </form>

        <form action="/profile" method="POST" style="text-align: center; margin-bottom: 15px">
            <input type="hidden" name="_csrf" value="{{csrfToken}}">
            <input type="password" class="input" name="password" placeholder="Old password">
            <input type="password" class="input" name="new_password" placeholder="New password">
            <button type="submit" class="btn button">Change Password</button>
        </form>
    </div>
</div>

<script>
    function getUserElement(id) {
        return document.querySelector(id)
    }
    getAuthUser((err, authUser) => {
        if (err || !authUser)
            return
        getUserElement("#user-username").innerHTML += authUser.username
        getUserElement("#user-email").innerHTML += authUser.email
    })
</script>